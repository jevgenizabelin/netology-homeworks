#  Домашнее задание к занятию "14.1 Создание и использование секретов"

##  Домашнее задание к занятию "14.1 Создание и использование секретов"

Выполните приведённые ниже команды в консоли, получите вывод команд. Сохраните задачу 1 как справочный материал.

###  Как создать секрет?

```
openssl genrsa -out cert.key 4096
openssl req -x509 -new -key cert.key -days 3650 -out cert.crt \
-subj '/C=RU/ST=Moscow/L=Moscow/CN=server.local'
kubectl create secret tls domain-cert --cert=certs/cert.crt --key=certs/cert.key
```

- Создаем

```
root@minicube:/home/jz# openssl genrsa -out cert.key 4096
Generating RSA private key, 4096 bit long modulus (2 primes)
...++++
............................++++
e is 65537 (0x010001)
```
```
root@minicube:/home/jz# openssl req -x509 -new -key cert.key -days 3650 -out cert.crt \
> -subj '/C=RU/ST=Moscow/L=Moscow/CN=server.local'
root@minicube:/home/jz# ls -l
total 12
-rw-r--r-- 1 root root 1944 Mar 13 19:07 cert.crt
-rw------- 1 root root 3247 Mar 13 19:06 cert.key
drwxr-xr-x 2 root root 4096 Mar 13 18:49 certs
```
```
root@minicube:/home/jz# kubectl create secret tls domain-cert --cert=certs/cert.crt --key=certs/cert.key
secret/domain-cert created
```

###  Как просмотреть список секретов?

```
kubectl get secrets
kubectl get secret
```
- Проверяем

```
root@minicube:/home/jz# kubectl get secret
NAME                  TYPE                                  DATA   AGE
default-token-qqlmk   kubernetes.io/service-account-token   3      52d
domain-cert           kubernetes.io/tls                     2      4m10s
root@minicube:/home/jz# kubectl get secrets
NAME                  TYPE                                  DATA   AGE
default-token-qqlmk   kubernetes.io/service-account-token   3      52d
domain-cert           kubernetes.io/tls                     2      4m27s
```

###  Как просмотреть секрет?

```
kubectl get secret domain-cert
kubectl describe secret domain-cert
```
- Смотрим

```
root@minicube:/home/jz# kubectl get secret domain-cert
NAME          TYPE                DATA   AGE
domain-cert   kubernetes.io/tls   2      7m5s
root@minicube:/home/jz# kubectl describe secret domain-cert
Name:         domain-cert
Namespace:    default
Labels:       <none>
Annotations:  <none>

Type:  kubernetes.io/tls

Data
====
tls.crt:  1944 bytes
tls.key:  3247 bytes
```

###  Как получить информацию в формате YAML и/или JSON?

```
kubectl get secret domain-cert -o yaml
kubectl get secret domain-cert -o json
```
- Получаем

```
root@minicube:/home/jz# kubectl get secret domain-cert -o yaml
apiVersion: v1
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZiVENDQTFXZ0F3SUJBZ0lVRWJrbk5UQ0FCSks2UFRRT0orUjZ1ZTg4Y3pZd0RRWUpLb1pJaHZjTkFRRUwKQlFBd1JqRUxNQWtHQTFVRUJoTUNVbFV4RHpBTkJnTlZCQWdNQmsxdmMyTnZkekVQTUEwR0ExVUVCd3dHVFc5egpZMjkzTVJVd0V3WURWUVFEREF4elpYSjJaWEl1Ykc5allXd3dIaGNOTWpJd016RXpNVGcwT0RVd1doY05Nekl3Ck16RXdNVGcwT0RVd1dqQkdNUXN3Q1FZRFZRUUdFd0pTVlRFUE1BMEdBMVVFQ0F3R1RXOXpZMjkzTVE4d0RRWUQKVlFRSERBWk5iM05qYjNjeEZUQVRCZ05WQkFNTURITmxjblpsY2k1c2IyTmhiRENDQWlJd0RRWUpLb1pJaHZjTgpBUUVCQlFBRGdnSVBBRENDQWdvQ2dnSUJBTGJvUmswVU8wbUtyRmgxVmJCYmFFVTdMNUFsMS9VNk54UkJMZGxWCk9DczhOc0lYK2hSZTRZdkFqTVB3QXhhclFTME5OUEdoczZEYjJ3MENCTlY3REFQU1NOck5xL2xQajVYUmxCTmgKWTY1KzNxV3d5aXdIbm9qbUtHYlB6UzZSRERsODJ1WjhCcjVjRmdDdTlhR3hKd2tMcHdjYks2Y1NXelFMZS9vSQpPWjdqR3hTODliblR4NHRZL1JVZUpCcGppeithZCtXWlVrZFJRSlkyejYrK0RnYmxLM1RXTTNyMC9UNkxCYW5zCnZiR2pTMDc0Y2k3TWVpbXh6dWpuY0FDZW10cW5vNmthR1pNMHhuWUN2TGZQc0pEM094V3MvTzFMUUkxZ1BCemoKV0lYNnZCd2NaNm5kUlovaTZYcHI3dG80UUFYWDlJUmxIeUY0Vmw4aFlkWk8rSGJmNmpWSVBVbHFYbXRBNStRQQpGOUdDYTBhR1Bzb05TTTQ0UFFSNXVCUUhYNXVYZTMyb2xmUDBKNXNSc3h6VlVZN0pNd1MxVWpDQkpBa3c0L1BvCmFHT0I2aytudjlldGJqWjVVN1lQVXVBTUR6dElxNEJkU05DbUpjamRDVGlvc09oNSt1UzJDNXVaMkxkSkJ6Q0QKM0lXcFZJamNEeCttMjFHcE1hcXZReFR4b2lVNEJUVDFLTWxMMEVrc3QzNVRrVzduOWNYYllhdDZjM0RZemFLQQpsZkl2OEJiRHlqdkFNSEEyc2MrbktySEJIa1BTRlZKRkJjMjFXdTdnWnhUdDVVS1MrV0Q3MC9ySVRHMzNCMi9qCmJHUG1SaFhYUEMrR1YreFBjeDJWN2hyd3FnMEJkcUpTQUwzQ3p4T2pNdFN1STZYUUNGbjl2Uk9FYzR3aktENmYKTytqWEFnTUJBQUdqVXpCUk1CMEdBMVVkRGdRV0JCVDdoN0lMMklBQnJZQktwTWR1OUE1ZGkrVEhXakFmQmdOVgpIU01FR0RBV2dCVDdoN0lMMklBQnJZQktwTWR1OUE1ZGkrVEhXakFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQTBHCkNTcUdTSWIzRFFFQkN3VUFBNElDQVFDYjNNUnljTkNVblh0SWJDUXVFZ2dvcjJ5YnFNbmZpTWdBelU2eG9GOXoKRGx0M3dGdkFCZG1oajIyc2Z0cmEyTmJ2aDFPWHNZbXhsWFpqVzJRamxhQmFnYndOd3RTbXY4R0I2UEtOVlNaQwpCdG02YmVGb1BqWnFOTnZwcHZBTUsrYnRWSUY1eDBIaVNBU21PSjV3VVBHVjV4OUZ0d2dOd1pKbFY3WENxQlNUClFHVlNlTlJIcGdyQU10ejdNZkZyUWdqR09kZERIQmVvWTk3TmdGaERORjFBbTRzSWRES1JkblBjaGtETUI3SmYKR2xNdVhxN3EyUDRBVHdpN3lYWjhXcFRXOG1kbHV4RmtGMUV4UjhnY1ZEVkZqYlVscXJ1K1RLL1l2TVZTTCsxRApDZHRjcEJhMzNTcEFrTVdhMFB4ZjhRWGJSWlVBaEt3cTZzTU5hRm1WTFBKUk43eG0xUDNjclgyTndUYi82RkdQCkV0ZUhYTDNqcG1taVFTZWxqLzl3aC9NdW1kTXRKRGM0bEdPbG91eC9RZHE3OTZyak13STAvTE56cy90eDRSaTYKWXNxQzRrMk5XUzBhVUx0UDd5TEFaT3VNUHQ3c2xOYzVoMmdFVTcwOWxXa1BQeDVhV1p6cFlqdy9Pd2NKNy9HSgpZODl2dGlsREk5b2Z5aldOQVgzRCtKWmFUUFBXc2lqekVSUTRNUEpyU3lMcTZwQWU1a2VySW9mYlhsOGJwOTZBCmZ6VHlKQm0wN3Z5bG0yVE1HNE1nYmRiVjdSWDg4SWlhaUY5dE1uY3JqVzBHL2dVZDNrSW9XeFY4OFUvV2Z5UmUKUFQ0RjErbmg5L0w1ZGIyRytuaEpmM0pWZ3ZySHRkcE9rWmVEbkNXNElUR2NRem1RbjFBQWNZczVKYXQ3eVlGegpuZz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlKS2dJQkFBS0NBZ0VBdHVoR1RSUTdTWXFzV0hWVnNGdG9SVHN2a0NYWDlUbzNGRUV0MlZVNEt6dzJ3aGY2CkZGN2hpOENNdy9BREZxdEJMUTAwOGFHem9OdmJEUUlFMVhzTUE5SkkyczJyK1UrUGxkR1VFMkZqcm43ZXBiREsKTEFlZWlPWW9acy9OTHBFTU9YemE1bndHdmx3V0FLNzFvYkVuQ1F1bkJ4c3JweEpiTkF0NytnZzVudU1iRkx6MQp1ZFBIaTFqOUZSNGtHbU9MUDVwMzVabFNSMUZBbGpiUHI3NE9CdVVyZE5ZemV2VDlQb3NGcWV5OXNhTkxUdmh5CkxzeDZLYkhPNk9kd0FKNmEycWVqcVJvWmt6VEdkZ0s4dDgrd2tQYzdGYXo4N1V0QWpXQThIT05ZaGZxOEhCeG4KcWQxRm4rTHBlbXZ1MmpoQUJkZjBoR1VmSVhoV1h5Rmgxazc0ZHQvcU5VZzlTV3BlYTBEbjVBQVgwWUpyUm9ZKwp5ZzFJempnOUJIbTRGQWRmbTVkN2ZhaVY4L1FubXhHekhOVlJqc2t6QkxWU01JRWtDVERqOCtob1k0SHFUNmUvCjE2MXVObmxUdGc5UzRBd1BPMGlyZ0YxSTBLWWx5TjBKT0tpdzZIbjY1TFlMbTVuWXQwa0hNSVBjaGFsVWlOd1AKSDZiYlVha3hxcTlERlBHaUpUZ0ZOUFVveVV2UVNTeTNmbE9SYnVmMXhkdGhxM3B6Y05qTm9vQ1Y4aS93RnNQSwpPOEF3Y0RheHo2Y3FzY0VlUTlJVlVrVUZ6YlZhN3VCbkZPM2xRcEw1WVB2VCtzaE1iZmNIYitOc1krWkdGZGM4Ckw0Wlg3RTl6SFpYdUd2Q3FEUUYyb2xJQXZjTFBFNk15MUs0anBkQUlXZjI5RTRSempDTW9QcDg3Nk5jQ0F3RUEKQVFLQ0FnRUFvUUViaVJRTEVEUmllMGRsMDJUVEIwWVBHeXRFeTFlZ1RsTUZvZTdURDdQa1c3d3haYWNUa1NwQQpmdVdTUW0walpSM2dBZWNlTUxYM1A1OE1WRU1KRTRBU281QXlGcmFESlJVajdGOXBHSndUTHZUTk1pN096YUVUCjVWUjhQOFpzWlZwVGNsbXdzZlpyWTlTZTRlTUlBbjFnWE8vODRBZFhneHVzMlM1T1VsK0ZZaDduaXRreUtLWi8KdVF3Y0thS0FXOCtFUlBaT3AvcU5DTzFjcWsxNUdYYTNaeFI2b254dlE1T3F1NlpxWUtqbVRMQ0VDay95SlN1ZwpnQUhoNUptNHBFcTIxTTdsdmwvUlp1WUg2eUdHUWtWdW5DajNSNFpiWDFkYjh1M282WjhKNFJEYjYzbWNwUjVmCitXUnpEMkkrY1NaazFmb1JpaXZjazhiVjBZa1lTa2JGK0FRL0NkTEIzcFRISFZxYmRJR1I0Z3NlTm1UeGwzSnQKcHVlTm5KVm5ZZTNhN25uWVB2M0JpaHF2VW13VlZUWlNnd252RUdOR3FxT0xZZVFQeWJ0UXNxbnFnUnhsajFhMwp6U293WTFGamNXSUtUaDBVZE1Ubnp0SkFWSVMzTU5JaU43YzNkYTF5YWVGTmRGRi9Kai9nenpBQ0l4TmYzOFphCjBmRVQwM1c2eUl2dEtYZ1lmNEsxU0U1SDJ4RFh4T2FKcmxkdkVMWEttRkdpb2JaRGczM1ZtZ3c0Nkx5V1VIR1gKRkt6ME5RQ3RmZHlURmxIeHpCaHlFRXJEMGxDa0hiUXJaUG5LK0lnK2JkeHRwYTY4eDBhZ05Sa2drRUxsckVEZApNd2xjVFdKQkxpSnY3dVBYdHA0L01VWGxUR2xoazBDK2hKcGc2U25tblQzaEJOZ0l2VUVDZ2dFQkFOMkhIWTVKClVZTEs0M1YraDZzQzN1RzRpVkU4VFN0YmpGQlMvSjZkQlRtNlRWTm5WRk9kVkZ6NVJtUEJ3bnNiTDZraGIwT00KZGxtZEdvc2VQMWhxYjJXRVVyd0daWTN5Y25tazhiRW9ENmNYU0NWeFRheGt0UUNsbVBwaTE2SVVaUE9yZnVsZQpBRXZmb2VsQ0R0TFN1bTd0bW5VNmZzNFd2NDFBMHN4MExjRFpFMEFySzhDTk8yK09PN3BhTXlMWWJxVE5SVWRqCmQyOER3WlBQZEZZaUxtR2tadlJvNmkyN2F0eGIxcXY0STQxTFA2eTBJcWE3Y3FjWVdRaTliRWdUVDlWMXFKWWcKQ0hscy8wQlljMW01OHlhM2ZuZEQ3RmY0T0RsbHEyY2xFbVNpdzdzNmlDY3lCY2xReFkyUE1EbnNocmFaaXdQUgo5Z3hzRmVPRUpvMmJlTGNDZ2dFQkFOTmVwL0ZOZzU5NXlWZ0FDTENDb3JQRTYrNHdhaUlON3lHcUhWaWhJNUVUCnhnZnJRMTludWw4Uy92Q1pEKzJFNm1NZUQ0ZUVIdFUzN1FBUmQyRWxWRVhqVDFycWtkeHR0RDU4dTlrRDFQOUgKSVhJMWV1eWdtRjlGK2RwZmhtcXZTVzBpc3REOW53dSsrdzk2c25zOElFaURhblNMdEg1K2hkTXJxOHlLbXpIRQovYVpWb21QUGRsekk2QVNDMzhWZWlIYS9QU0JTTGZoaVpNSEhNQzVUUVpWU01EZUdyY3EyVWVOc2hNODUxNW5FClRIdWJTL1BDQTlza2o5QUF3VVVWVGdpVWtKTFRGV2lSQytUQzNjcmxmcXZ2cjl3cFh4bTBMNExGZTJ0WkZVTTgKZUEvQkU5ZzY3VnZqaTlpeklmV1JEaVYyMDEvVmp6RVhRbE9lSzhzdnNPRUNnZ0VCQU1BUTVzSTN0VkUyQVZJYwpXeG9kQ2dzZ1NRWkN4eEdCZFQwclJsVnJCRjNSdGp0S3ltVVljazJOM3NhYzlyWnZrcm9NQUFETDVzeTVsb3JwCnRiZzl4OGwzbVpmbDMrVGJRUDlRMERCdDhHeEpsa2JJWHJUS045aVF1dnJUK2V0UHpWc3E1SVVHK0REUWV2dlgKUnl6b2diV3RrZzV6b2YraTMzOWpwYUNZVmhidTNtN3pQeUxhRUo4ZTdaQWJwbHhlMUVkVXBlMUlRd1BnZU5Sagp1SlQ1VzhkU2wrVHVsYU1DN0pxVGthTldKOVRZV2lPdHBxRnl3ZXc0QXZHOThnVG5vWDhNWFJlVVBHU3k2UGZyCitFN2lGdndKZWIrRUI0VVo4LzFudGQxZTJmeWcxaDBkbVhDS1FWUVRFTVUwVVhiWEtORm1mSTNhVzM3WHMzNm8KVkJqUXBDOENnZ0VBUEovQWtaQkcrVDJvQnlwelU1VVViM1ZDcWgyT3cxZTF4N1VRRjdTWUMrdGMrRFo5SzJjSAo2Rzc5V2lxOGk4WjhwNU1lcHlLNDZUVFNNQnZTWHJXak55eGNQVnBjSFpvRmdZcXJJakpjTEIvTnN3RXQwYUs2Ck1WRlR1Vk4rclNpN2FhYnpITWd4anQvbkNHaUx1cGJqTjRraHhtMnZoanhweThpUnpPZlFYWFQvdjI1K1ZoeFIKK1lqU0swRVNSM3kyclVCcW10T1hSYytLMEoxOTd6dUg2dmtZeFVSR29vYXFkQTFUQmxDenl2R25jaWgzbjJGOQpVNlJuN3lQWVN5VXlMWG5YQVpXelpUdDg2czhOYUQxc21JbjFxYkxnQ1BKS1VqcXNESDBQZ1NwZDBUN3lueWsvCm5RUmx2dkNhQStIbjZjenNFV2VpVzFVdGUrZzQ3VjB2WVFLQ0FRRUF0SWxiU0RPdFJPN0FETzhUd0srbllKWXIKSXdkYXIzWkZNcUI0dXFGUlZIK2FBTmhzeTRuYlJQYVFtdFlHYkxYNE51dDdXRTNUZHNHRWMwdUxRZm9ySnRlbQpRZnY2RHQ2NzUwblNTei9tcHBtWmhQY0hYRlM4UjloOVBpek9jZTc0V0RyUFRzL05WOHJiYUs0d3NRaC9WYXdYCnlpZ2kwK1RhbzJJR2VUWkphMUJNUFViMHEwZjhUZ3hhZnRkSjM4MXpBSG1lMlR5K0ZNaGFXcGZvb3RhdG9rUUkKVWJ2WlZPcDdiRzhDSzBvaThjN3FZS2NpenNOencwbHZrbk9Bbzd4Yi9OZlFac2hidkZhZ3c2RktyWGlJMSt4bgpGd1Vvb0NQeHM4YlBHRlFLM1l5VXJ1MXpmeGc0V2ozSkZGNmJNL0wydVdUNXM0SDFoMUdHZ2Y3ZjJ2RkZyZz09Ci0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==
kind: Secret
metadata:
  creationTimestamp: "2022-03-13T19:04:48Z"
  name: domain-cert
  namespace: default
  resourceVersion: "640271"
  uid: 61039756-6dc4-4ffc-8fb3-f9fb2530d518
type: kubernetes.io/tls
```
```
root@minicube:/home/jz# kubectl get secret domain-cert -o json
{
    "apiVersion": "v1",
    "data": {
        "tls.crt": "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZiVENDQTFXZ0F3SUJBZ0lVRWJrbk5UQ0FCSks2UFRRT0orUjZ1ZTg4Y3pZd0RRWUpLb1pJaHZjTkFRRUwKQlFBd1JqRUxNQWtHQTFVRUJoTUNVbFV4RHpBTkJnTlZCQWdNQmsxdmMyTnZkekVQTUEwR0ExVUVCd3dHVFc5egpZMjkzTVJVd0V3WURWUVFEREF4elpYSjJaWEl1Ykc5allXd3dIaGNOTWpJd016RXpNVGcwT0RVd1doY05Nekl3Ck16RXdNVGcwT0RVd1dqQkdNUXN3Q1FZRFZRUUdFd0pTVlRFUE1BMEdBMVVFQ0F3R1RXOXpZMjkzTVE4d0RRWUQKVlFRSERBWk5iM05qYjNjeEZUQVRCZ05WQkFNTURITmxjblpsY2k1c2IyTmhiRENDQWlJd0RRWUpLb1pJaHZjTgpBUUVCQlFBRGdnSVBBRENDQWdvQ2dnSUJBTGJvUmswVU8wbUtyRmgxVmJCYmFFVTdMNUFsMS9VNk54UkJMZGxWCk9DczhOc0lYK2hSZTRZdkFqTVB3QXhhclFTME5OUEdoczZEYjJ3MENCTlY3REFQU1NOck5xL2xQajVYUmxCTmgKWTY1KzNxV3d5aXdIbm9qbUtHYlB6UzZSRERsODJ1WjhCcjVjRmdDdTlhR3hKd2tMcHdjYks2Y1NXelFMZS9vSQpPWjdqR3hTODliblR4NHRZL1JVZUpCcGppeithZCtXWlVrZFJRSlkyejYrK0RnYmxLM1RXTTNyMC9UNkxCYW5zCnZiR2pTMDc0Y2k3TWVpbXh6dWpuY0FDZW10cW5vNmthR1pNMHhuWUN2TGZQc0pEM094V3MvTzFMUUkxZ1BCemoKV0lYNnZCd2NaNm5kUlovaTZYcHI3dG80UUFYWDlJUmxIeUY0Vmw4aFlkWk8rSGJmNmpWSVBVbHFYbXRBNStRQQpGOUdDYTBhR1Bzb05TTTQ0UFFSNXVCUUhYNXVYZTMyb2xmUDBKNXNSc3h6VlVZN0pNd1MxVWpDQkpBa3c0L1BvCmFHT0I2aytudjlldGJqWjVVN1lQVXVBTUR6dElxNEJkU05DbUpjamRDVGlvc09oNSt1UzJDNXVaMkxkSkJ6Q0QKM0lXcFZJamNEeCttMjFHcE1hcXZReFR4b2lVNEJUVDFLTWxMMEVrc3QzNVRrVzduOWNYYllhdDZjM0RZemFLQQpsZkl2OEJiRHlqdkFNSEEyc2MrbktySEJIa1BTRlZKRkJjMjFXdTdnWnhUdDVVS1MrV0Q3MC9ySVRHMzNCMi9qCmJHUG1SaFhYUEMrR1YreFBjeDJWN2hyd3FnMEJkcUpTQUwzQ3p4T2pNdFN1STZYUUNGbjl2Uk9FYzR3aktENmYKTytqWEFnTUJBQUdqVXpCUk1CMEdBMVVkRGdRV0JCVDdoN0lMMklBQnJZQktwTWR1OUE1ZGkrVEhXakFmQmdOVgpIU01FR0RBV2dCVDdoN0lMMklBQnJZQktwTWR1OUE1ZGkrVEhXakFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQTBHCkNTcUdTSWIzRFFFQkN3VUFBNElDQVFDYjNNUnljTkNVblh0SWJDUXVFZ2dvcjJ5YnFNbmZpTWdBelU2eG9GOXoKRGx0M3dGdkFCZG1oajIyc2Z0cmEyTmJ2aDFPWHNZbXhsWFpqVzJRamxhQmFnYndOd3RTbXY4R0I2UEtOVlNaQwpCdG02YmVGb1BqWnFOTnZwcHZBTUsrYnRWSUY1eDBIaVNBU21PSjV3VVBHVjV4OUZ0d2dOd1pKbFY3WENxQlNUClFHVlNlTlJIcGdyQU10ejdNZkZyUWdqR09kZERIQmVvWTk3TmdGaERORjFBbTRzSWRES1JkblBjaGtETUI3SmYKR2xNdVhxN3EyUDRBVHdpN3lYWjhXcFRXOG1kbHV4RmtGMUV4UjhnY1ZEVkZqYlVscXJ1K1RLL1l2TVZTTCsxRApDZHRjcEJhMzNTcEFrTVdhMFB4ZjhRWGJSWlVBaEt3cTZzTU5hRm1WTFBKUk43eG0xUDNjclgyTndUYi82RkdQCkV0ZUhYTDNqcG1taVFTZWxqLzl3aC9NdW1kTXRKRGM0bEdPbG91eC9RZHE3OTZyak13STAvTE56cy90eDRSaTYKWXNxQzRrMk5XUzBhVUx0UDd5TEFaT3VNUHQ3c2xOYzVoMmdFVTcwOWxXa1BQeDVhV1p6cFlqdy9Pd2NKNy9HSgpZODl2dGlsREk5b2Z5aldOQVgzRCtKWmFUUFBXc2lqekVSUTRNUEpyU3lMcTZwQWU1a2VySW9mYlhsOGJwOTZBCmZ6VHlKQm0wN3Z5bG0yVE1HNE1nYmRiVjdSWDg4SWlhaUY5dE1uY3JqVzBHL2dVZDNrSW9XeFY4OFUvV2Z5UmUKUFQ0RjErbmg5L0w1ZGIyRytuaEpmM0pWZ3ZySHRkcE9rWmVEbkNXNElUR2NRem1RbjFBQWNZczVKYXQ3eVlGegpuZz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K",
        "tls.key": "LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlKS2dJQkFBS0NBZ0VBdHVoR1RSUTdTWXFzV0hWVnNGdG9SVHN2a0NYWDlUbzNGRUV0MlZVNEt6dzJ3aGY2CkZGN2hpOENNdy9BREZxdEJMUTAwOGFHem9OdmJEUUlFMVhzTUE5SkkyczJyK1UrUGxkR1VFMkZqcm43ZXBiREsKTEFlZWlPWW9acy9OTHBFTU9YemE1bndHdmx3V0FLNzFvYkVuQ1F1bkJ4c3JweEpiTkF0NytnZzVudU1iRkx6MQp1ZFBIaTFqOUZSNGtHbU9MUDVwMzVabFNSMUZBbGpiUHI3NE9CdVVyZE5ZemV2VDlQb3NGcWV5OXNhTkxUdmh5CkxzeDZLYkhPNk9kd0FKNmEycWVqcVJvWmt6VEdkZ0s4dDgrd2tQYzdGYXo4N1V0QWpXQThIT05ZaGZxOEhCeG4KcWQxRm4rTHBlbXZ1MmpoQUJkZjBoR1VmSVhoV1h5Rmgxazc0ZHQvcU5VZzlTV3BlYTBEbjVBQVgwWUpyUm9ZKwp5ZzFJempnOUJIbTRGQWRmbTVkN2ZhaVY4L1FubXhHekhOVlJqc2t6QkxWU01JRWtDVERqOCtob1k0SHFUNmUvCjE2MXVObmxUdGc5UzRBd1BPMGlyZ0YxSTBLWWx5TjBKT0tpdzZIbjY1TFlMbTVuWXQwa0hNSVBjaGFsVWlOd1AKSDZiYlVha3hxcTlERlBHaUpUZ0ZOUFVveVV2UVNTeTNmbE9SYnVmMXhkdGhxM3B6Y05qTm9vQ1Y4aS93RnNQSwpPOEF3Y0RheHo2Y3FzY0VlUTlJVlVrVUZ6YlZhN3VCbkZPM2xRcEw1WVB2VCtzaE1iZmNIYitOc1krWkdGZGM4Ckw0Wlg3RTl6SFpYdUd2Q3FEUUYyb2xJQXZjTFBFNk15MUs0anBkQUlXZjI5RTRSempDTW9QcDg3Nk5jQ0F3RUEKQVFLQ0FnRUFvUUViaVJRTEVEUmllMGRsMDJUVEIwWVBHeXRFeTFlZ1RsTUZvZTdURDdQa1c3d3haYWNUa1NwQQpmdVdTUW0walpSM2dBZWNlTUxYM1A1OE1WRU1KRTRBU281QXlGcmFESlJVajdGOXBHSndUTHZUTk1pN096YUVUCjVWUjhQOFpzWlZwVGNsbXdzZlpyWTlTZTRlTUlBbjFnWE8vODRBZFhneHVzMlM1T1VsK0ZZaDduaXRreUtLWi8KdVF3Y0thS0FXOCtFUlBaT3AvcU5DTzFjcWsxNUdYYTNaeFI2b254dlE1T3F1NlpxWUtqbVRMQ0VDay95SlN1ZwpnQUhoNUptNHBFcTIxTTdsdmwvUlp1WUg2eUdHUWtWdW5DajNSNFpiWDFkYjh1M282WjhKNFJEYjYzbWNwUjVmCitXUnpEMkkrY1NaazFmb1JpaXZjazhiVjBZa1lTa2JGK0FRL0NkTEIzcFRISFZxYmRJR1I0Z3NlTm1UeGwzSnQKcHVlTm5KVm5ZZTNhN25uWVB2M0JpaHF2VW13VlZUWlNnd252RUdOR3FxT0xZZVFQeWJ0UXNxbnFnUnhsajFhMwp6U293WTFGamNXSUtUaDBVZE1Ubnp0SkFWSVMzTU5JaU43YzNkYTF5YWVGTmRGRi9Kai9nenpBQ0l4TmYzOFphCjBmRVQwM1c2eUl2dEtYZ1lmNEsxU0U1SDJ4RFh4T2FKcmxkdkVMWEttRkdpb2JaRGczM1ZtZ3c0Nkx5V1VIR1gKRkt6ME5RQ3RmZHlURmxIeHpCaHlFRXJEMGxDa0hiUXJaUG5LK0lnK2JkeHRwYTY4eDBhZ05Sa2drRUxsckVEZApNd2xjVFdKQkxpSnY3dVBYdHA0L01VWGxUR2xoazBDK2hKcGc2U25tblQzaEJOZ0l2VUVDZ2dFQkFOMkhIWTVKClVZTEs0M1YraDZzQzN1RzRpVkU4VFN0YmpGQlMvSjZkQlRtNlRWTm5WRk9kVkZ6NVJtUEJ3bnNiTDZraGIwT00KZGxtZEdvc2VQMWhxYjJXRVVyd0daWTN5Y25tazhiRW9ENmNYU0NWeFRheGt0UUNsbVBwaTE2SVVaUE9yZnVsZQpBRXZmb2VsQ0R0TFN1bTd0bW5VNmZzNFd2NDFBMHN4MExjRFpFMEFySzhDTk8yK09PN3BhTXlMWWJxVE5SVWRqCmQyOER3WlBQZEZZaUxtR2tadlJvNmkyN2F0eGIxcXY0STQxTFA2eTBJcWE3Y3FjWVdRaTliRWdUVDlWMXFKWWcKQ0hscy8wQlljMW01OHlhM2ZuZEQ3RmY0T0RsbHEyY2xFbVNpdzdzNmlDY3lCY2xReFkyUE1EbnNocmFaaXdQUgo5Z3hzRmVPRUpvMmJlTGNDZ2dFQkFOTmVwL0ZOZzU5NXlWZ0FDTENDb3JQRTYrNHdhaUlON3lHcUhWaWhJNUVUCnhnZnJRMTludWw4Uy92Q1pEKzJFNm1NZUQ0ZUVIdFUzN1FBUmQyRWxWRVhqVDFycWtkeHR0RDU4dTlrRDFQOUgKSVhJMWV1eWdtRjlGK2RwZmhtcXZTVzBpc3REOW53dSsrdzk2c25zOElFaURhblNMdEg1K2hkTXJxOHlLbXpIRQovYVpWb21QUGRsekk2QVNDMzhWZWlIYS9QU0JTTGZoaVpNSEhNQzVUUVpWU01EZUdyY3EyVWVOc2hNODUxNW5FClRIdWJTL1BDQTlza2o5QUF3VVVWVGdpVWtKTFRGV2lSQytUQzNjcmxmcXZ2cjl3cFh4bTBMNExGZTJ0WkZVTTgKZUEvQkU5ZzY3VnZqaTlpeklmV1JEaVYyMDEvVmp6RVhRbE9lSzhzdnNPRUNnZ0VCQU1BUTVzSTN0VkUyQVZJYwpXeG9kQ2dzZ1NRWkN4eEdCZFQwclJsVnJCRjNSdGp0S3ltVVljazJOM3NhYzlyWnZrcm9NQUFETDVzeTVsb3JwCnRiZzl4OGwzbVpmbDMrVGJRUDlRMERCdDhHeEpsa2JJWHJUS045aVF1dnJUK2V0UHpWc3E1SVVHK0REUWV2dlgKUnl6b2diV3RrZzV6b2YraTMzOWpwYUNZVmhidTNtN3pQeUxhRUo4ZTdaQWJwbHhlMUVkVXBlMUlRd1BnZU5Sagp1SlQ1VzhkU2wrVHVsYU1DN0pxVGthTldKOVRZV2lPdHBxRnl3ZXc0QXZHOThnVG5vWDhNWFJlVVBHU3k2UGZyCitFN2lGdndKZWIrRUI0VVo4LzFudGQxZTJmeWcxaDBkbVhDS1FWUVRFTVUwVVhiWEtORm1mSTNhVzM3WHMzNm8KVkJqUXBDOENnZ0VBUEovQWtaQkcrVDJvQnlwelU1VVViM1ZDcWgyT3cxZTF4N1VRRjdTWUMrdGMrRFo5SzJjSAo2Rzc5V2lxOGk4WjhwNU1lcHlLNDZUVFNNQnZTWHJXak55eGNQVnBjSFpvRmdZcXJJakpjTEIvTnN3RXQwYUs2Ck1WRlR1Vk4rclNpN2FhYnpITWd4anQvbkNHaUx1cGJqTjRraHhtMnZoanhweThpUnpPZlFYWFQvdjI1K1ZoeFIKK1lqU0swRVNSM3kyclVCcW10T1hSYytLMEoxOTd6dUg2dmtZeFVSR29vYXFkQTFUQmxDenl2R25jaWgzbjJGOQpVNlJuN3lQWVN5VXlMWG5YQVpXelpUdDg2czhOYUQxc21JbjFxYkxnQ1BKS1VqcXNESDBQZ1NwZDBUN3lueWsvCm5RUmx2dkNhQStIbjZjenNFV2VpVzFVdGUrZzQ3VjB2WVFLQ0FRRUF0SWxiU0RPdFJPN0FETzhUd0srbllKWXIKSXdkYXIzWkZNcUI0dXFGUlZIK2FBTmhzeTRuYlJQYVFtdFlHYkxYNE51dDdXRTNUZHNHRWMwdUxRZm9ySnRlbQpRZnY2RHQ2NzUwblNTei9tcHBtWmhQY0hYRlM4UjloOVBpek9jZTc0V0RyUFRzL05WOHJiYUs0d3NRaC9WYXdYCnlpZ2kwK1RhbzJJR2VUWkphMUJNUFViMHEwZjhUZ3hhZnRkSjM4MXpBSG1lMlR5K0ZNaGFXcGZvb3RhdG9rUUkKVWJ2WlZPcDdiRzhDSzBvaThjN3FZS2NpenNOencwbHZrbk9Bbzd4Yi9OZlFac2hidkZhZ3c2RktyWGlJMSt4bgpGd1Vvb0NQeHM4YlBHRlFLM1l5VXJ1MXpmeGc0V2ozSkZGNmJNL0wydVdUNXM0SDFoMUdHZ2Y3ZjJ2RkZyZz09Ci0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg=="
    },
    "kind": "Secret",
    "metadata": {
        "creationTimestamp": "2022-03-13T19:04:48Z",
        "name": "domain-cert",
        "namespace": "default",
        "resourceVersion": "640271",
        "uid": "61039756-6dc4-4ffc-8fb3-f9fb2530d518"
    },
    "type": "kubernetes.io/tls"
}
```

###  Как выгрузить секрет и сохранить его в файл?

```
kubectl get secrets -o json > secrets.json
kubectl get secret domain-cert -o yaml > domain-cert.yml
```

- Выгружаем

```
root@minicube:/home/jz# ls -l
total 28
drwxr-xr-x 2 root root  4096 Mar 13 18:49 certs
-rw-r--r-- 1 root root 11055 Mar 13 19:16 secrets.json
-rw-r--r-- 1 root root 10427 Mar 13 19:17 secrets.yml
```

###  Как удалить секрет?

```
kubectl delete secret domain-cert
```
- Удаляем

```
root@minicube:/home/jz# kubectl delete secret domain-cert
secret "domain-cert" deleted
root@minicube:/home/jz# kubectl get secrets
NAME                  TYPE                                  DATA   AGE
default-token-qqlmk   kubernetes.io/service-account-token   3      52d
```

###  Как загрузить секрет из файла?

```
kubectl apply -f domain-cert.yml
```
- Загружаем

```
root@minicube:/home/jz# kubectl apply -f domain-cert.yml
Warning: resource secrets/default-token-qqlmk is missing the kubectl.kubernetes.io/last-applied-configuration annotation which is required by kubectl apply. kubectl apply should only be used on resources created declaratively by either kubectl create --save-config or kubectl apply. The missing annotation will be patched automatically.
secret/default-token-qqlmk configured
secret/domain-cert created
root@minicube:/home/jz# kubectl get secrets
NAME                  TYPE                                  DATA   AGE
default-token-qqlmk   kubernetes.io/service-account-token   3      52d
domain-cert           kubernetes.io/tls                     2      27s
```


##  Задача 2 (*): Работа с секретами внутри модуля

Выберите любимый образ контейнера, подключите секреты и проверьте их доступность как в виде переменных окружения, так и в виде примонтированного тома.

- Создадим фаил с секретами ![secrets.yaml](./secrets.yaml) и применим
```
root@node1:~/14-1# kubectl apply -f ./secrets.yaml
secret/topsecret created
```
```
root@node1:~/14-1# kubectl get secret topsecret -o yaml
apiVersion: v1
data:
  password: QmFsYWxhaWth
  username: YWRtaW4=
kind: Secret
metadata:
  creationTimestamp: "2022-04-16T10:20:07Z"
  name: topsecret
  namespace: default
  resourceVersion: "12348321"
  uid: 72befa42-5fb8-407c-99f9-6f36697035a6
type: Opaque
```
- Создадим под с секретом ![secret-pod.yaml](./secret-pod.yaml)
```
root@node1:~/14-1# kubectl apply -f ./secret-pod.yaml
pod/top-secret-pod created
```
- Проверяем переменные
```
root@node1:~/14-1# kubectl exec -i -t top-secret-pod -- /bin/sh -c 'echo "$MY_USERNAME\n$MY_PASS"'
admin
Balalaika
```


